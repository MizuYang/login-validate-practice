{"version":3,"file":"js/140.2c463ec2.js","mappings":"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","sources":["webpack://vue-template/./src/views/LoginView.vue","webpack://vue-template/./src/components/LoginForm.vue","webpack://vue-template/./src/components/LoginForm.vue?dcb9","webpack://vue-template/./src/views/LoginView.vue?5755"],"sourcesContent":["<template>\n  <!-- 登入元件 -->\n  <LoginForm></LoginForm>\n\n</template>\n\n<script>\nimport LoginForm from '../components/LoginForm.vue'\nexport default {\n  components: {\n    LoginForm\n  },\n\n  data () {\n    return {\n    }\n  },\n\n  mounted () {\n  }\n}\n</script>\n","<template>\n  <!-- 登入欄位 -->\n  <form class=\"center-center\" @submit.prevent=\"sendLoginForm\">\n    <section class=\"border w-50 p-5 pb-0\">\n      <h2>登入</h2>\n      <label for=\"account\">帳號</label>\n      <input type=\"text\" id=\"account\" class=\"form-control\" v-model=\"userLoginForm.username\">\n      <i ref=\"username\" class=\"text-danger\"></i>\n      <br />\n\n      <label for=\"password\">密碼</label>\n      <input type=\"password\" id=\"password\" class=\"form-control\" v-model=\"userLoginForm.password\">\n      <i ref=\"password\" class=\"text-danger\"></i>\n      <br />\n\n      <i ref=\"loginFeedback\" class=\"text-danger\"></i>\n\n      <div class=\"mt-3 mb-5\">\n        <button class=\"btn btn-primary w-100 mb-2\" type=\"submit\">登入</button>\n      </div>\n    </section>\n  </form>\n\n  <IsLoading v-model:active=\"isLoading\"></IsLoading>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n  data () {\n    return {\n      userLoginForm: {\n        username: '',\n        password: ''\n      },\n      i18n: {\n        username: '帳號',\n        password: '密碼',\n        'The email address is badly formatted.': 'Email 格式錯誤!!!',\n        'The password is invalid or the user does not have a password.': '密碼錯誤!!!'\n      }\n    }\n  },\n\n  computed: {\n    ...mapState(['isLoading'])\n  },\n\n  methods: {\n    //* 按下登入按紐\n    async sendLoginForm () {\n      //* 驗證欄位是否有填寫\n      if (this.validate()) {\n        await this.login()\n      }\n    },\n    //* 驗證欄位\n    validate () {\n      let result = ''\n      const objVal = Object.values(this.userLoginForm)\n      //* 如果只填寫一個欄位則中斷\n      if (objVal.length < 2) {\n        this.unfilledFeedback()\n        result = false\n      } else {\n        this.clearUnfilledFeedback()\n        result = true\n        //* 如果帳密填寫完又刪掉，一樣回饋錯誤\n        objVal.forEach(item => {\n          if (item === '') {\n            this.unfilledFeedback()\n            result = false\n          }\n        })\n      }\n      return result\n    },\n    //* 未填寫回饋\n    unfilledFeedback () {\n      Object.keys(this.userLoginForm).forEach(item => {\n        if (!this.userLoginForm[item]) {\n          this.$refs[item].textContent = `${this.i18n[item]} 欄位尚未填寫`\n        }\n      })\n    },\n    //* 清除未填寫回饋\n    clearUnfilledFeedback () {\n      Object.keys(this.userLoginForm).forEach(item => {\n        if (this.userLoginForm[item]) {\n          this.$refs[item].textContent = ''\n        }\n      })\n    },\n    login () {\n      return new Promise((resolve, reject) => {\n        this.$store.commit('OPEN_LOADING')\n\n        const api = `${process.env.VUE_APP_LOGIN_API}/admin/signin`\n        console.log(api)\n        this.$http.post(api, this.userLoginForm)\n          .then(res => {\n            console.log(res)\n\n            this.$store.commit('CLOSE_LOADING')\n\n            //* token, expired 存入 cookie\n            const { token, expired } = res.data\n            document.cookie = `loginToken=${token};expires=${new Date(expired)};`\n\n            this.$router.push('/checkLogin')\n          })\n          .catch(err => {\n            console.log(err)\n\n            this.$store.commit('CLOSE_LOADING')\n            this.loginFailFeedback(err.response.data.error.message)\n          })\n        resolve()\n      })\n    },\n    //* 登入失敗回饋\n    loginFailFeedback (errMessage) {\n      if (this.i18n[errMessage]) {\n        this.$refs.loginFeedback.textContent = `${this.i18n[errMessage]}`\n      } else {\n        this.$refs.loginFeedback.textContent = '您輸入的帳號錯誤 或 密碼錯誤太多次遭到鎖定，請重新更改密碼即可正常使用!!'\n      }\n    }\n  },\n\n  mounted () {\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n$w: 50%;\n$h: 50%;\n.center-center {\n  width: $w;\n  height: $h;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-25%,-50%);\n}\n</style>\n","import { render } from \"./LoginForm.vue?vue&type=template&id=0cf0ae8e&scoped=true\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js\"\n\nimport \"./LoginForm.vue?vue&type=style&index=0&id=0cf0ae8e&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\psdk55052004\\\\Desktop\\\\loginValidate\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0cf0ae8e\"]])\n\nexport default __exports__","import { render } from \"./LoginView.vue?vue&type=template&id=306bc876\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\psdk55052004\\\\Desktop\\\\loginValidate\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_LoginForm","class","_createElementVNode","for","ref","type","onSubmit","$options","_hoisted_2","_hoisted_3","id","$data","username","$event","_hoisted_5","_hoisted_6","password","_hoisted_8","_hoisted_10","_createVNode","_component_IsLoading","active","_ctx","data","userLoginForm","i18n","computed","mapState","methods","async","this","validate","login","result","objVal","Object","values","length","unfilledFeedback","clearUnfilledFeedback","forEach","item","keys","$refs","textContent","Promise","resolve","reject","$store","commit","api","console","log","$http","post","then","res","token","expired","document","cookie","Date","$router","push","catch","err","loginFailFeedback","response","error","message","errMessage","loginFeedback","mounted","__exports__","components","LoginForm","render"],"sourceRoot":""}