{"version":3,"file":"js/207.ab25ee6a.js","mappings":"2LACOA,MAAM,iB,GAGPC,EAAAA,EAAAA,GAA0C,MAAtCD,MAAM,gBAAe,gBAAY,G,GAE/BA,MAAM,Q,WACiC,Q,GAEvCA,MAAM,Q,WACiC,Q,GAEvCA,MAAM,Q,SAQFA,MAAM,e,GAChBC,EAAAA,EAAAA,GAAa,UAAT,QAAI,G,WACY,Y,gJArBxBA,EAAAA,EAAAA,GAuBM,MAvBN,EAuBM,CArBYC,EAAAA,eAAAA,EAAAA,EAAAA,OAAhBC,EAAAA,EAAAA,IAcWC,EAAAA,GAAA,CAAAC,IAAAA,GAAA,CAbTC,GACAL,EAAAA,EAAAA,GAUK,YATHA,EAAAA,EAAAA,GAEK,KAFL,EAEK,EADHM,EAAAA,EAAAA,IAA2DC,EAAA,CAA9CC,GAAG,0BAAwB,C,kBAAC,IAAI,M,SAE/CR,EAAAA,EAAAA,GAEK,KAFL,EAEK,EADHM,EAAAA,EAAAA,IAA2DC,EAAA,CAA9CC,GAAG,0BAAwB,C,kBAAC,IAAI,M,SAE/CR,EAAAA,EAAAA,GAEK,KAFL,EAEK,EADHA,EAAAA,EAAAA,GAA8D,UAAtDS,KAAK,SAAUC,QAAK,oBAAEC,EAAAA,cAAAA,EAAAA,gBAAAA,KAAc,kBAGhDL,EAAAA,EAAAA,IAA2BM,IAb7B,kBAiBAV,EAAAA,EAAAA,IAGM,MAHN,EAGM,CAFJW,GACAP,EAAAA,EAAAA,IAA0CC,EAAA,CAA7BC,GAAG,KAAG,C,kBAAC,IAAQ,M,YAIhCF,EAAAA,EAAAA,IAAkDQ,EAAA,CAA/BC,OAAQC,EAAAA,U,iCAAAA,EAAAA,UAASC,IAApC,wB,YAKF,GACEC,WAAY,GAGZC,OACE,MAAO,CACLC,cAAc,IAIlBC,SAAU,KACLC,EAAAA,EAAAA,IAAS,CAAC,eAGfC,QAAS,CAEPC,aAEE,MAAMC,EAAQC,SAASC,OAAOC,QAC5B,mDACA,MAGF,GAAIH,EAAO,CACTI,KAAKC,OAAOC,OAAO,gBAGnBF,KAAKG,MAAMC,SAASC,QAAQC,OAAOC,cAAgBX,EACnD,MAAMY,EAAO,yDACbR,KAAKG,MACFM,KAAKD,GACLE,MAAMC,IACLC,QAAQC,IAAIF,GACZX,KAAKT,cAAe,EACpBS,KAAKC,OAAOC,OAAO,oBAEpBY,OAAOC,IACNH,QAAQC,IAAIE,GACZf,KAAKC,OAAOC,OAAO,sBAK3Bc,eACE,SAASC,EAAWC,EAAOC,EAAQC,GACjC,MAAMC,EAAI,IAAIC,KACdD,EAAEE,QAAQF,EAAEG,UAAsB,GAATJ,EAAc,GAAK,GAAK,KACjD,MAAMK,EAAU,WAAaJ,EAAEK,cAC/B7B,SAASC,OAASoB,EAAQ,IAAMC,EAAS,KAAOM,EAGlDR,EAAU,aAAc,IAAK,KAIjCU,UACE3B,KAAKL,e,QChFT,MAAMiC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://vue-template/./src/views/CheckLogin.vue","webpack://vue-template/./src/views/CheckLogin.vue?7931"],"sourcesContent":["<template>\n  <div class=\"center-center\">\n    <!-- 登入成功(需驗證通過才顯示) -->\n    <template v-if=\"loginSuccess\">\n      <h2 class=\"text-success\">恭喜你!!登入成功!!!</h2>\n      <ul>\n        <li class=\"fs-3\">\n          <router-link to=\"/checkLogin/loginPage1\">頁面 A</router-link>\n        </li>\n        <li class=\"fs-3\">\n          <router-link to=\"/checkLogin/loginPage2\">頁面 B</router-link>\n        </li>\n        <li class=\"fs-3\">\n          <button type=\"button\" @click=\"deleteCookie\">刪除 cookie</button>\n        </li>\n      </ul>\n      <router-view></router-view>\n    </template>\n\n    <!-- 登入失敗 -->\n    <div v-else class=\"text-danger\">\n      <h3>登入失敗</h3>\n      <router-link to=\"/\">點擊此處重新登入</router-link>\n    </div>\n  </div>\n\n  <IsLoading v-model:active=\"isLoading\"></IsLoading>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n  components: {\n  },\n\n  data () {\n    return {\n      loginSuccess: false\n    }\n  },\n\n  computed: {\n    ...mapState(['isLoading'])\n  },\n\n  methods: {\n    //* 檢查登入狀態\n    checkLogin () {\n      //* 取出 token\n      const token = document.cookie.replace(\n        /(?:(?:^|.*;\\s*)loginToken\\s*=\\s*([^;]*).*$)|^.*$/,\n        '$1'\n      )\n\n      if (token) {\n        this.$store.commit('OPEN_LOADING')\n\n        //* axios 預設帶入 token 就不用每次都要帶 headers: { Authorization: token } 了\n        this.$http.defaults.headers.common.Authorization = token\n        const api = `${process.env.VUE_APP_LOGIN_API}/api/user/check`\n        this.$http\n          .post(api)\n          .then((res) => {\n            console.log(res)\n            this.loginSuccess = true\n            this.$store.commit('CLOSE_LOADING')\n          })\n          .catch((err) => {\n            console.log(err)\n            this.$store.commit('CLOSE_LOADING')\n          })\n      }\n    },\n    //* 刪除 cookie\n    deleteCookie () {\n      function setCookie (cname, cvalue, exdays) {\n        const d = new Date()\n        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000))\n        const expires = 'expires=' + d.toUTCString()\n        document.cookie = cname + '=' + cvalue + '; ' + expires\n      }\n\n      setCookie('loginToken', '', -1)\n    }\n  },\n\n  mounted () {\n    this.checkLogin()\n  }\n\n}\n</script>\n\n<style lang='scss' scope>\n$w: 50%;\n$h: 50%;\n.center-center {\n  width: $w;\n  height: $h;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-25%,-50%);\n}\n</style>\n","import { render } from \"./CheckLogin.vue?vue&type=template&id=03db3343\"\nimport script from \"./CheckLogin.vue?vue&type=script&lang=js\"\nexport * from \"./CheckLogin.vue?vue&type=script&lang=js\"\n\nimport \"./CheckLogin.vue?vue&type=style&index=0&id=03db3343&lang=scss&scope=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\psdk55052004\\\\Desktop\\\\loginValidate\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","$data","_createElementBlock","_Fragment","key","_hoisted_2","_createVNode","_component_router_link","to","type","onClick","$options","_component_router_view","_hoisted_9","_component_IsLoading","active","_ctx","$event","components","data","loginSuccess","computed","mapState","methods","checkLogin","token","document","cookie","replace","this","$store","commit","$http","defaults","headers","common","Authorization","api","post","then","res","console","log","catch","err","deleteCookie","setCookie","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","mounted","__exports__","render"],"sourceRoot":""}